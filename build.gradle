plugins {
    id 'java'
    id 'application'
    id 'com.palantir.graal' version '0.7.1-16-gb4461f9'
}

mainClassName = 'com.olyno.skriptcli.CLI'

sourceCompatibility = 1.11

repositories {
    jcenter()
    mavenCentral()
    maven { url 'https://jitpack.io' }
}

dependencies {
    compile project(':parser')
}

jar {
    manifest {
        attributes("Main-Class": mainClassName,
                "Implementation-Title": "skript-cli",
                "Implementation-Version": "0.1.0")
    }
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

graal {
    graalVersion '20.1.0'
    javaVersion '11'
    mainClass mainClassName
    outputName 'skript'
}

configurations.all {
    resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
}